angular.module('theApp', [])


// angular.module("theApp").controller("mainCtrl", function($scope, theService) {
   
//         $scope.sendInput = function (myInput) {
//             theService.postIt(myInput).then(function(res) {
//                 console.log(res);
//                 if(res.type === "positive") {
//                     $("#sky").css("color", "blue"); 
//                 } else if(res.type === "negative") {
//                     document.getElementById("sky").style.color = "black"
//                 } 
//             });
    
//         }
       
// });


angular.module("theApp").directive("oneDir",  ["theService", function(theService) {
	  return {
    restrict: 'E',
    templateUrl: '../views/view.html',
    link: function(scope){
            scope.sendInput = function (myInput) {
            theService.postIt(myInput)
            .then(function(res) {
                console.log(res);
                scope.results = res.type;
             if(scope.results === "positive") {
            $("#sky").css({"background-color": "blue"})
        }
        
            });
    
        }
    }
  }
}]);


angular.module('theApp').service('theService', ["$http", function($http) {
   
     this.postIt = function(data) {
       
        return $http({
            method: "POST",
            url: '/analyzeEP',
            data: {text:data}
        }).then(function(res) {
            var filteredRes = res.data.docSentiment;
            return filteredRes;
        })
    };

}]
);

